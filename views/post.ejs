<%- include('./partials/header'); %>

<div class="post">
    <div class="frame">
        <h3>CREATE JOB</h3>

        <form class="form">
            <div class="title">
                <label>Title</label>
                <input name="title"/>
            </div>

            <div class="reward">
                <label>Reward (â‚¹)</label>
                <input name="reward" type="number"/>
            </div>

            <div class="detail">
                <label>Detail</label>
                <textarea name="detail" cols="40" rows="5"></textarea>
            </div>
        </form>

        <button id="addjob" class="addjob">ADD JOB</button>
    </div>
</div>

<script>
    const form = document.querySelector('form');
    const addjob = document.getElementById('addjob');

    addjob.addEventListener('click', async (e) => {
        e.preventDefault();

        console.log("pressed");

        const title = form.title.value;
        const detail = form.detail.value;
        const reward = form.reward.value;

        try {
            const res = await fetch('/post', {
                method: 'POST',
                body: JSON.stringify({ title, detail, reward}),
                headers: { 'Content-Type': 'application/json' }
            });
        }
        catch (err) {
            console.log(err);
        }

        location.assign('/');
    })

    
</script>

<%- include('./partials/footer'); %>