<%- include('./partials/header'); %>

<div class="editpro">
<form class="form frame">
    <label>Name</label>
    <input name="fullname"/>
    <div class="error"></div>

    <label>Bio</label>
    <input name="bio"/>
    <div class="error"></div>

    <label>Phone</label>
    <input name="phone"/>
    <div class="error"></div>

    <button>UPDATE</button>
</form>
</div>

<script>
    const form = document.querySelector('form');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        console.log("pressed");

        const fullname = form.fullname.value;
        const bio = form.bio.value;
        const phone = form.phone.value;

        try {
            const res = await fetch('/editprofile', {
                method: 'POST',
                body: JSON.stringify({ fullname, bio, phone}),
                headers: { 'Content-Type': 'application/json' }
            });
            location.assign('/profile');
            
        }
        catch (err) {
            console.log(err);
        }
    })
</script>

<%- include('./partials/footer'); %>